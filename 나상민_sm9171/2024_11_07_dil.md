# 나상민_2024_11_07_dil.md
## 진도
- 85p 까지

## 중요한 개념
### MySQL의 전체 구조
1. MySQL 엔진
2. 스토리지 엔진
3. 핸들러 API

### MySQL 엔진
- MySQL 엔진은 클라이언트로부터의 접속 및 쿼리 요청을 처리하는 `커넥션 핸들러`와 `SQL 파서 및 전처리기`, 쿼리의 최적화된 실행을 위한 `옵티마이저`가 중심을 이룬다.
- MySQL 엔진은 요청된 SQL문장을 분석하거나 최적화하는 등 DBMS의 두뇌에 해당하는 처리를 수행한다.

### 스토리지 엔진
- 실제 데이터를 디스크 스토리지에 저장하거나 디스크 스토리지로부터 데이터를 읽어오는 부분은 스토리지 엔진이 전담한다.
- MySQL 서버에서 MySQL 엔진은 하나지만 스토리지 엔진은 여러 개를 동시에 사용할 수 있다.
- 각 스토리지 엔진은 성능 향상을 위해 키 캐시나 InnoDB 버퍼 풀과 같은 기능을 내장하고 있다.

### 핸들러 API
- MySQL 엔진과 스토리지 엔진 사이에 위치하는 인터페이스로, MySQL 엔진이 스토리지 엔진에 데이터를 저장하거나 읽어오기 위해 사용하는 API이다.
- `SHOW GLOBAL STATUS LIKE 'Handler%';` 명령을 사용하면 핸들러 API의 사용 통계를 확인할 수 있다.

### MySQL 스레딩 구조
- MySQL 서버는 프로세스 기반이 아니라 스레드 기반으로 작동하며, 크게 포그라운드 스레드와 백그라운드 스레드로 구분할 수 있다.
- MySQL 서버에서 실행 중인 스레드의 목록은 performance_schema 스키마의 threads 테이블에서 확인할 수 있다.
- 포그라운드 스레드는 최소한 MySQL 서버에 접속된 클라이언트의 수만큼 존재하며, 주로 각 클라이언트 사용자가 요청하는 쿼리 문장을 처리한다.
- 포그라운드 스레드는 데이터를 MySQL의 데이터 버퍼나 캐시로부터 가져오며, 버퍼나 캐시에 없는 경우에는 직접 디스크의 데이터나 인덱스 파일로부터 데이터를 읽어와서 작업을 처리한다.
- InnoDB는 다음과 같이 여러가지 작업이 백그라운드로 처리된다.
  - 인서트 버퍼를 병합하는 스레드
  - 로그를 디스크로 기록하는 스레드
  - InnoDB 버퍼 풀의 데이터를 디스크에 기록하는 스레드
  - 데이터를 버퍼로 읽어 오는 스레드
  - 잠금이나 데드락을 모니터링하는 스레드

### 글로벌 메모리 영역
- 테이블 캐시
- InnoDB 버퍼 풀
- Innodb 어댑티브 해시 인덱스
- InnoDB 리두 로그 버퍼

### 로컬 메모리 영역(세션 메모리 영역)
- 정렬 버퍼
- 조인 버퍼
- 바이너리 로그 캐시
- 네트워크 버퍼

## 새로 배운 개념